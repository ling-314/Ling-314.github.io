{"title":"GameAI详解-无监督学习模式","uid":"4426f1555134a9b07ad8f15d45c3b236","slug":"GameAI详解-无监督学习模式","date":"2025-06-29T05:04:35.000Z","updated":"2025-06-29T05:19:18.028Z","comments":true,"path":"api/articles/GameAI详解-无监督学习模式.json","keywords":"编程 日常 游戏","cover":[],"content":"<h1 id=\"GameAI详解-无监督学习模式\"><a href=\"#GameAI详解-无监督学习模式\" class=\"headerlink\" title=\"GameAI详解-无监督学习模式\"></a>GameAI详解-无监督学习模式</h1><p>在AI技术蓬勃发展的今天，一些具有AI功能的软件总是让人眼前一亮。编程猫早已在K3和K4中加入了AI功能，但由于使用难度高，并没有太多作品中出现AI相关积木。这篇帖子的目的是让有能力的人学会使用GameAI并使作品锦上添花。</p>\n<h2 id=\"GameAI原理\"><a href=\"#GameAI原理\" class=\"headerlink\" title=\"GameAI原理\"></a>GameAI原理</h2><p>GameAI是基于神经网络算法，利用有监督和无监督两种学习模式，通过生成模型，最终实现让AI自己玩游戏的一个机器学习方法。简单来说，就是让AI尽量像一个真人一样完成人物。一个完整的神经网络包括了以下三个部分：</p>\n<ul>\n<li>输入层：AI需要处理的数据（比如角色血量），影响接下来的动作</li>\n<li>隐藏层（也叫隐含层）：对输入层的数据进行处理，最终决定AI的动作</li>\n<li>输出层：AI所做的动作</li>\n</ul>\n<p>输入层的数量取决于AI要处理的数据个数（比如角色血量为一个数据）；隐藏层的层数和每层的个数越多，AI越强大，但性能越差；输出层的个数取决于AI要执行的动作（如跳跃、奔跑）。</p>\n<h2 id=\"无监督学习模式\"><a href=\"#无监督学习模式\" class=\"headerlink\" title=\"无监督学习模式\"></a>无监督学习模式</h2><p>有监督学习模式，就相当于我们手把手教AI如何玩游戏，使用的是『后向传播算法』。</p>\n<p>那么无监督学习模式，就是让AI自己学会玩游戏，使用的是『遗传算法』。</p>\n<p>无监督学习模式指<strong>AI自己产生随机数据，并利用遗传算法</strong>，淘汰没有用的随机数，把有用的数据保留不断优化模型的一种学习方式。</p>\n<p>GameAI的无监督模式下，初始模型是随机生成，而不是训练来的。</p>\n<p>通过生成大量的随机模型，让AI角色在游戏中不断尝试，这些模型有的会很快淘汰掉，有的却可以得很高的分。</p>\n<p>然后通过遗传算法，将得分高的模型结构保留下来，像生物一样让他们相互之间进化， 最终训练出能够获得更高分，表现地更好，一代比一代强的模型。</p>\n<p>我<strong>个人认为</strong>无监督学习模式适合像Flappy Bird这种超级简单的程序。</p>\n<h2 id=\"搭建GameAI\"><a href=\"#搭建GameAI\" class=\"headerlink\" title=\"搭建GameAI\"></a>搭建GameAI</h2><p>本次我们要将一个已完成的手动操作的Flappy Bird程序改为一个可以由GameAI自动操作的程序。（BCM官方的Flappy Bird是已经完成的，我将GameAI的相关内容去除后在主页开源了）</p>\n<h3 id=\"启动GameAI\"><a href=\"#启动GameAI\" class=\"headerlink\" title=\"启动GameAI\"></a>启动GameAI</h3><p><img src=\"/assets/GameAI%E8%AF%A6%E8%A7%A3-%E6%9C%89%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0%E6%A8%A1%E5%BC%8F/code0.png\"></p>\n<p>这是GameAI的基本结构。第一行初始化了AI模型，并设置了输入层、隐藏层、输出层。</p>\n<p>输入层为2，是因为AI要判断自己是否碰到了柱子，需要用到自己和柱子的y坐标。输出层为2，是因为小鸟要做出“飞行”、“不操作”两个动作。隐藏层默认为4，像Flappy Bird这样的简单程序，隐藏层可以很少，但大型游戏一般设置多个隐藏层。</p>\n<p>第二行将自己作为AI角色进行训练，训练结果存入模型“GameAI”。本次使用的是无监督学习模式，角色完全由AI自己控制，第一次训练时AI什么也不懂，几乎总会死亡，使得效率大大降低，因此我们需要设置多个角色数量，这里设置每轮运行数量 100。</p>\n<p>每轮运行数量越多，AI训练的时间越短，性能消耗越大。</p>\n<p>第三行启动了AI，开始进行训练。</p>\n<p>第四行是在AI角色死亡后才执行的，使用遗传算法将训练结果存入模型。</p>\n<h3 id=\"AI做出决策\"><a href=\"#AI做出决策\" class=\"headerlink\" title=\"AI做出决策\"></a>AI做出决策</h3><p><img src=\"/assets/GameAI%E8%AF%A6%E8%A7%A3-%E6%9C%89%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0%E6%A8%A1%E5%BC%8F/code1.png\"></p>\n<p>这段代码设置了AI死亡的条件，让训练能够停止。</p>\n<p><img src=\"/assets/GameAI%E8%AF%A6%E8%A7%A3-%E6%9C%89%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0%E6%A8%A1%E5%BC%8F/code2.png\"></p>\n<p>这段代码是训练AI的关键部分。</p>\n<p>第一行指定了AI可使用的行为为“飞行”和“不操作”。此处项数应与输出层保持一致。</p>\n<p>第三行让AI根据自己和柱子的y坐标判断自己要执行哪一个动作。此处项数应与输入层保持一致。</p>\n<p>第四行让AI决定此时应该执行哪个动作。</p>\n<p>当AI死亡时，记录它的得分“得分”（飞过的柱子数），得分越高AI认为此次训练越好。这里会让AI学会怎么做才不会死亡。</p>\n<h3 id=\"训练AI\"><a href=\"#训练AI\" class=\"headerlink\" title=\"训练AI\"></a>训练AI</h3><p>此时，我们可以开始训练AI了。程序会自动生成若干个AI角色，它们会无规律地执行动作，然后经过层层迭代、优化，得到一个最终结果存入AI模型。</p>\n<p><img src=\"/assets/GameAI%E8%AF%A6%E8%A7%A3-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0%E6%A8%A1%E5%BC%8F/code3.png\"></p>\n<p>在你认为训练次数足够，AI已经能够自行游戏的时候，在上面给出的第一段代码中删去训练所用的代码，这使得AI能够自己进行游戏。</p>\n<p>如果对AI的操作结果不太满意，可以重新（先初始化）或继续训练AI，直到满意为止。</p>\n<p>至此，一个GameAI已经训练完成。</p>\n<p>我这边在开启快速模式的情况下训练了 20 多代才使AI能够勉强通过。若程序越复杂（比如跑酷、对战），AI需要训练的次数越多。</p>\n<h2 id=\"最后\"><a href=\"#最后\" class=\"headerlink\" title=\"最后\"></a>最后</h2><p>我并不是专门研究AI的人，部分内容摘自官方文档，本帖可能会有错误或不当内容，希望各位能够指出错误完善本教程。</p>\n<p>When you learn, teach. When you get, give.</p>\n","text":"GameAI详解-无监督学习模式在AI技术蓬勃发展的今天，一些具有AI功能的软件总是让人眼前一亮。编程猫早已在K3和K4中加入了AI功能，但由于使用难度高，并没...","permalink":"/post/GameAI详解-无监督学习模式","photos":[],"count_time":{"symbolsCount":"1.8k","symbolsTime":"2 mins."},"categories":[],"tags":[{"name":"编程猫","slug":"编程猫","count":3,"path":"api/tags/编程猫.json"},{"name":"GameAI","slug":"GameAI","count":2,"path":"api/tags/GameAI.json"},{"name":"AI","slug":"AI","count":2,"path":"api/tags/AI.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#GameAI%E8%AF%A6%E8%A7%A3-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0%E6%A8%A1%E5%BC%8F\"><span class=\"toc-text\">GameAI详解-无监督学习模式</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#GameAI%E5%8E%9F%E7%90%86\"><span class=\"toc-text\">GameAI原理</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0%E6%A8%A1%E5%BC%8F\"><span class=\"toc-text\">无监督学习模式</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%90%AD%E5%BB%BAGameAI\"><span class=\"toc-text\">搭建GameAI</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%90%AF%E5%8A%A8GameAI\"><span class=\"toc-text\">启动GameAI</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#AI%E5%81%9A%E5%87%BA%E5%86%B3%E7%AD%96\"><span class=\"toc-text\">AI做出决策</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E8%AE%AD%E7%BB%83AI\"><span class=\"toc-text\">训练AI</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%9C%80%E5%90%8E\"><span class=\"toc-text\">最后</span></a></li></ol></li></ol>","author":{"name":"ling-314","slug":"blog-author","avatar":"/icons/avatar.jpg","link":"/","description":"初中牲的日常","socials":{"github":"https://github.com/ling-314","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"bilibili":{"icon":"/icons/bilibili.svg","link":"https://space.bilibili.com/1405802918"},"QQ":{"icon":"/icons/qq.svg","link":"https://qm.qq.com/q/PM3T5CPtwy"}}}},"mapped":true,"hidden":false,"prev_post":{"title":"K4作品文件解剖","uid":"333cbe4c4352177cf877fa37036a47fe","slug":"K4作品文件解剖","date":"2025-06-29T05:06:44.000Z","updated":"2025-06-29T05:17:31.815Z","comments":true,"path":"api/articles/K4作品文件解剖.json","keywords":"编程 日常 游戏","cover":[],"text":"提示：本帖内容非常硬核，建议有计算机基础的人观看 K4作品文件解剖前言我们每创建一个K4作品，编程猫都会生成一个对应的.bcm4文件来储存作品的信息，对作品的每...","permalink":"/post/K4作品文件解剖","photos":[],"count_time":{"symbolsCount":"4.4k","symbolsTime":"4 mins."},"categories":[],"tags":[{"name":"编程猫","slug":"编程猫","count":3,"path":"api/tags/编程猫.json"},{"name":"Kitten4","slug":"Kitten4","count":1,"path":"api/tags/Kitten4.json"}],"author":{"name":"ling-314","slug":"blog-author","avatar":"/icons/avatar.jpg","link":"/","description":"初中牲的日常","socials":{"github":"https://github.com/ling-314","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"bilibili":{"icon":"/icons/bilibili.svg","link":"https://space.bilibili.com/1405802918"},"QQ":{"icon":"/icons/qq.svg","link":"https://qm.qq.com/q/PM3T5CPtwy"}}}}},"next_post":{"title":"GameAI详解-有监督学习模式","uid":"161d41de12606544950f2cc8de828000","slug":"GameAI详解-有监督学习模式","date":"2025-06-29T04:24:04.000Z","updated":"2025-06-29T05:15:13.297Z","comments":true,"path":"api/articles/GameAI详解-有监督学习模式.json","keywords":"编程 日常 游戏","cover":[],"text":"GameAI详解-有监督学习模式在AI技术蓬勃发展的今天，一些具有AI功能的软件总是让人眼前一亮。编程猫早已在K3和K4中加入了AI功能，但由于使用难度高，并没...","permalink":"/post/GameAI详解-有监督学习模式","photos":[],"count_time":{"symbolsCount":"1.4k","symbolsTime":"1 mins."},"categories":[],"tags":[{"name":"编程猫","slug":"编程猫","count":3,"path":"api/tags/编程猫.json"},{"name":"GameAI","slug":"GameAI","count":2,"path":"api/tags/GameAI.json"},{"name":"AI","slug":"AI","count":2,"path":"api/tags/AI.json"}],"author":{"name":"ling-314","slug":"blog-author","avatar":"/icons/avatar.jpg","link":"/","description":"初中牲的日常","socials":{"github":"https://github.com/ling-314","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"bilibili":{"icon":"/icons/bilibili.svg","link":"https://space.bilibili.com/1405802918"},"QQ":{"icon":"/icons/qq.svg","link":"https://qm.qq.com/q/PM3T5CPtwy"}}}}}}